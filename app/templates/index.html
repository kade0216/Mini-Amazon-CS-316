{% extends "base.html" %}

{% block content %}

<br><br>

<!-- <a href="{{ url_for('index.get_seller_inventory_page', user_id=current_user.id) }}" type="button" class="btn btn-light">Log in</a> -->

<!-- <form action="users.php" method="GET"> -->
<h5>Search bar:</h5>
<form action="{{ url_for('index.get_search_results')}}" method="POST">
    <input name="search" id="search" type="text" placeholder="Type here" >
    <!-- <input id="submit" type="button" value="Search" class="btn btn-light"> -->
    <button class="btn btn-light" type="submit">Search</button>
</form>
<!-- </form> -->

<h5>Categories:</h5>
{% for cat in categories%}
    <a href="{{ url_for('index.get_cat_page', category=cat) }}" type="button" class="btn btn-light">{{cat}}</a>
{% endfor %}

<h5>Sort by:</h5>
<a href="{{ url_for('index.get_product__sort_low_to_high') }}" type="button" class="btn btn-light">Price low to high</a>
<a href="{{ url_for('index.get_product__sort_high_to_low') }}" type="button" class="btn btn-light">Price high to low</a>

<!-- <img src=”/static/images/vanilla_ice_cream.jpeg” alt='vanilla ice cream'>  -->


<h2>Products for sale:</h2>
<table class='table table-hover table-bordered container'>
  <thead class="thead-dark">
    <tr>
      <!-- <th scope="col">Product ID</th> -->
      <th scope="col">Product Name</th>
      <th scope="col">Price</th>
      <th scope="col">Image</th>
      <th scope="col">Description</th>
    </tr>
  </thead>
  <tbody>
    {% for product in avail_products%}
      <tr>
        <th scope="row"> <a href="{{ url_for('index.get_product_page', name=product.name)}}">{{product.name}}</a> </th>
        <td>{{product.price}}</td>
        <td><img src="/static/css/images/{{product.name}}.jpeg" alt={{product.name}} style="width:auto;height:50px"></td>
        <td>{{product.description}}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<br><br>
{% if current_user.is_authenticated %}
<h2>Your recent purchases:</h2>
<table class='table table-hover table-bordered container'>
  <thead class="thead-dark">
    <tr>
      <th scope="col">Purchase ID</th>
      <th scope="col">Product Name</th>
      <th scope="col">Price</th>
    </tr>
  </thead>
  <tbody>
    {% for purchase in purchase_history%}
      <tr>
        <th scope="row">{{purchase.id}}</th>
        <td>{{purchase.pid}}</td>
        <td>{{purchase.time_purchased}}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p><a href="{{ url_for('users.login') }}">Log in</a> to see your purchase history!</p>
{% endif %}

{% endblock %}
